<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Targowisko - Interaktywna Mapa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        .header {
            background-color: #343a40;
            color: white;
            padding: 15px 0;
            text-align: center;
        }
        .map-container {
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        #mapa {
            width: 100%;
            height: auto;
            cursor: grab;
        }
        .controls {
            text-align: center;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Targowisko - Interaktywna Mapa</h1>
    </div>
    <div class="container my-4">
        <div class="row justify-content-center">
            <div class="col-md-10 map-container">
                <object type="image/svg+xml" data="SVG/mapa1.svg" id="mapa"></object>
            </div>
        </div>
        <div class="controls">
            <button class="btn btn-primary" id="zoomIn">+</button>
            <button class="btn btn-primary" id="zoomOut">-</button>
            <button class="btn btn-secondary" id="reset">Reset</button>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let mapaObject = document.getElementById("mapa");
            let scale = 1, pointX = 0, pointY = 0, panning = false, start = { x: 0, y: 0 };
            
            mapaObject.addEventListener("load", function () {
                let svgDocument = mapaObject.contentDocument;
                let svgElement = svgDocument.querySelector("svg");

                function setTransform() {
                    svgElement.setAttribute("transform", `translate(${pointX}, ${pointY}) scale(${scale})`);
                }

                svgElement.addEventListener("mousedown", function (e) {
                    e.preventDefault();
                    start = { x: e.clientX - pointX, y: e.clientY - pointY };
                    panning = true;
                    svgElement.style.cursor = "grabbing";
                });
                
                window.addEventListener("mouseup", function () {
                    panning = false;
                    svgElement.style.cursor = "grab";
                });
                
                window.addEventListener("mousemove", function (e) {
                    if (!panning) return;
                    pointX = e.clientX - start.x;
                    pointY = e.clientY - start.y;
                    setTransform();
                });
                
                svgElement.addEventListener("wheel", function (e) {
                    e.preventDefault();
                    let zoomFactor = (e.deltaY > 0) ? 0.9 : 1.1;
                    scale *= zoomFactor;
                    setTransform();
                });
                
                document.getElementById("zoomIn").addEventListener("click", function () {
                    scale *= 1.1;
                    setTransform();
                });
                
                document.getElementById("zoomOut").addEventListener("click", function () {
                    scale *= 0.9;
                    setTransform();
                });
                
                document.getElementById("reset").addEventListener("click", function () {
                    scale = 1;
                    pointX = 0;
                    pointY = 0;
                    setTransform();
                });
            });
        });
    </script>
    <!--jQuery póki co nie działa-->
    <!-- <script>
        $(document).ready(function () {
            let scale = 1, pointX = 0, pointY = 0, panning = false, start = { x: 0, y: 0 };

            // Upewnij się, że mapa została załadowana
            $("#mapa").on("load", function () {
                let svgDoc = this.contentDocument;
                let $svg = $(svgDoc).find("svg");

                function setTransform() {
                    // Zastosowanie transformacji na całym elemencie svg
                    $svg.attr("transform", `translate(${pointX}, ${pointY}) scale(${scale})`);
                }

                // Kliknięcie myszą - początek przesuwania
                $svg.on("mousedown", function (e) {
                    e.preventDefault();
                    start = { x: e.clientX - pointX, y: e.clientY - pointY };
                    panning = true;
                    $svg.css("cursor", "grabbing");
                });

                // Zakończenie przesuwania
                $(document).on("mouseup", function () {
                    panning = false;
                    $svg.css("cursor", "grab");
                });

                // Przesuwanie mapy podczas przytrzymywania myszki
                $(document).on("mousemove", function (e) {
                    if (!panning) return;
                    pointX = e.clientX - start.x;
                    pointY = e.clientY - start.y;
                    setTransform();
                });

                // Zoomowanie za pomocą kółka myszy
                $svg.on("wheel", function (e) {
                    e.preventDefault();
                    let delta = e.originalEvent.deltaY || e.originalEvent.wheelDelta;
                    let zoomFactor = (delta > 0) ? 0.9 : 1.1;
                    scale *= zoomFactor;
                    setTransform();
                });

                // Przyciski zoomIn i zoomOut
                $("#zoomIn").on("click", function () {
                    scale *= 1.1;
                    setTransform();
                });

                $("#zoomOut").on("click", function () {
                    scale *= 0.9;
                    setTransform();
                });

                // Resetowanie mapy
                $("#reset").on("click", function () {
                    scale = 1;
                    pointX = 0;
                    pointY = 0;
                    setTransform();
                });
            });
        });
    </script> -->
</body>
</html>